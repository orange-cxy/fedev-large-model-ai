!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var e={};var t=null;try{(function(t,n,o){let r=Promise.resolve();if(n&&n.length>0){const t=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),l=s?.nonce||s?.getAttribute("nonce");c=n.map(n=>{if((n=function(e){return"/fedev-large-model-ai/"+e}(n))in e)return;e[n]=!0;const r=n.endsWith(".css"),c=r?'[rel="stylesheet"]':"";if(o)for(let e=t.length-1;e>=0;e--){const o=t[e];if(o.href===n&&(!r||"stylesheet"===o.rel))return}else if(document.querySelector(`link[href="${n}"]${c}`))return;const s=document.createElement("link");return s.rel=r?"stylesheet":"modulepreload",r||(s.as="script"),s.crossOrigin="",s.href=n,l&&s.setAttribute("nonce",l),document.head.appendChild(s),r?new Promise((e,t)=>{s.addEventListener("load",e),s.addEventListener("error",()=>t(new Error(`Unable to preload CSS for ${n}`)))}):void 0}),r=Promise.all(c.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))}var c;function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(e=>{for(const t of e||[])"rejected"===t.status&&s(t.reason);return t().catch(s)})})(()=>import("./mode-config-CuatFriw.js"),[]).then(e=>{t=e.default||e,console.log("导入的模式配置:",t)}).catch(e=>{console.log("未找到模式配置文件，使用默认配置")})}catch(l){console.log("导入模式配置出错:",l)}document.getElementById("app").innerHTML='\n  <div class="container">\n    <h1>Hello Deepseek!</h1>\n    <div class="mode-switcher">\n      <button id="btn-mock" class="mode-btn active">Mock模式</button>\n      <button id="btn-real" class="mode-btn">真实模式</button>\n    </div>\n    <div id="current-mode" class="mode-info">当前模式: Mock</div>\n    <div id="reply" class="reply">thinking...</div>\n    <button id="refresh-btn" class="refresh-btn">刷新响应</button>\n  </div>\n';var n=document.createElement("style");function o(){try{const e=localStorage.getItem("app_mode");if("mock"===e||"real"===e){const t="mock"===e;return console.log("LocalStorage模式: "+(t?"mock":"真实")),t}const n=new URLSearchParams(window.location.search).get("mock");if(null!==n){const e="true"===n;return console.log("URL参数模式: "+(e?"mock":"真实")),e}if(t&&t.app_mode){const e="mock"===t.app_mode;return console.log("配置文件模式: "+(e?"mock":"真实")),e}return console.log("默认模式: mock"),!0}catch(l){return console.error("检查mock模式出错:",l),!0}}function r(e){localStorage.setItem("app_mode",e?"mock":"real"),document.getElementById("btn-mock").classList.toggle("active",e),document.getElementById("btn-real").classList.toggle("active",!e),document.getElementById("current-mode").textContent="当前模式: "+(e?"Mock":"真实"),console.log("模式已切换为: "+(e?"mock":"real"))}async function c(e){if(o())return void console.log("Mock模式下，不保存响应到文件");const t={timestamp:(new Date).toISOString(),response:e,request:{model:"deepseek-chat",messages:[{role:"system",content:"You are a helpful assistant."},{role:"user",content:"你好 Deepseek"}]}};try{const e=await(await fetch("http://localhost:3001/api/save-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();e.success?console.log(e.message):console.error("保存失败:",e.message)}catch(n){console.error("保存文件时发生错误:",n),function(e){const t=`${(new Date).toISOString().replace(/[:.]/g,"-")}-response.json`,n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),o=document.createElement("a");o.href=URL.createObjectURL(n),o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(o.href),console.log(`由于后端服务不可用，响应已保存为 ${t}（下载到您的默认下载文件夹）`)}(t)}}async function s(){const e=document.getElementById("reply");e.textContent="thinking...";const t=o();document.getElementById("current-mode").textContent="当前模式: "+(t?"Mock":"真实");try{const n=await async function(){const e=o();console.log("当前模式: "+(e?"Mock":"真实"));try{let t;if(e?(console.log("使用Mock API"),t=await fetch("http://localhost:3001/api/mock-deepseek",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:"你好 Deepseek"})})):(console.log("使用真实Deepseek API"),t=await fetch("https://api.deepseek.com/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer sk-ee9bcc66e551428486727c139640881a"},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"system",content:"You are a helpful assistant."},{role:"user",content:"你好 Deepseek"}],stream:!1})})),!t.ok)throw new Error(`${e?"模拟":"真实"}API错误: ${t.status}`);const n=await t.json(),o=n.choices[0].message.content;return c(n).catch(e=>console.error("保存响应失败:",e)),o}catch(t){return console.error((e?"获取模拟":"获取真实")+"Deepseek响应失败:",t),`这是一条${e?"模拟":"测试"}响应数据${e?"，用于验证Mock模式功能。":"，用于验证保存功能。"}`}}();e.textContent=n,t||await c(n)}catch(n){console.error("获取响应失败:",n),e.textContent=`获取响应失败: ${n.message}`}}n.textContent="\n  body {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    min-height: 100vh;\n    margin: 0;\n    background-color: #f0f7ff;\n  }\n  .container {\n    text-align: center;\n    padding: 2rem;\n    background-color: white;\n    border-radius: 12px;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  }\n  h1 {\n    color: #3498db;\n    margin-bottom: 1.5rem;\n  }\n  .reply {\n    padding: 1rem;\n    background-color: #f8f9fa;\n    border-radius: 8px;\n    border-left: 4px solid #3498db;\n    min-height: 60px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 1.1rem;\n  }\n",document.head.appendChild(n),function(){const e=document.getElementById("btn-mock"),t=document.getElementById("btn-real"),n=document.getElementById("refresh-btn");r(o()),e.addEventListener("click",()=>{r(!0),s()}),t.addEventListener("click",()=>{r(!1),s()}),n.addEventListener("click",()=>{s()})}(),s();
//# sourceMappingURL=index-DnXco2g4.js.map
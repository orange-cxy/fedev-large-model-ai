!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&o(e)}).observe(document,{childList:!0,subtree:!0})}function o(e){if(e.ep)return;e.ep=!0;const o=function(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?o.credentials="include":"anonymous"===e.crossOrigin?o.credentials="omit":o.credentials="same-origin",o}(e);fetch(e.href,o)}}();var e=(e,o,n)=>{const t=o.lastIndexOf("?"),r=e[-1===t||t<o.lastIndexOf("/")?o:o.slice(0,t)];return r?"function"==typeof r?r():Promise.resolve(r):new Promise((e,t)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o+(o.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})},o={};const n=function(e,n,t){let r=Promise.resolve();if(n&&n.length>0){const e=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),a=i?.nonce||i?.getAttribute("nonce");s=n.map(n=>{if((n=function(e){return"/fedev-large-model-ai/"+e}(n))in o)return;o[n]=!0;const r=n.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(t)for(let o=e.length-1;o>=0;o--){const t=e[o];if(t.href===n&&(!r||"stylesheet"===t.rel))return}else if(document.querySelector(`link[href="${n}"]${s}`))return;const i=document.createElement("link");return i.rel=r?"stylesheet":"modulepreload",r||(i.as="script"),i.crossOrigin="",i.href=n,a&&i.setAttribute("nonce",a),document.head.appendChild(i),r?new Promise((e,o)=>{i.addEventListener("load",e),i.addEventListener("error",()=>o(new Error(`Unable to preload CSS for ${n}`)))}):void 0}),r=Promise.all(s.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))}var s;function i(e){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=e,window.dispatchEvent(o),!o.defaultPrevented)throw e}return r.then(o=>{for(const e of o||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})};var t=["deepseek","cozeV3","cozeV2","kimi-k2-0905-preview"].map(o=>({id:o,json:()=>e({"./models/cozeV2.json":()=>n(()=>import("./cozeV2-D5Ngzbx2.js"),[]),"./models/cozeV3.json":()=>n(()=>import("./cozeV3-Du_tU4-F.js"),[]),"./models/deepseek.json":()=>n(()=>import("./deepseek-BathJCgQ.js"),[]),"./models/kimi-k2-0905-preview.json":()=>n(()=>import("./kimi-k2-0905-preview-C0-6Eb9c.js"),[])},`./models/${o}.json`,3),js:()=>e({"./models/cozeV2.js":()=>n(()=>import("./cozeV2-OmBbk4xN.js"),[]),"./models/cozeV3.js":()=>n(()=>import("./cozeV3-Bv8g86IY.js"),[]),"./models/deepseek.js":()=>n(()=>import("./deepseek-BD3r4UzN.js"),[]),"./models/kimi-k2-0905-preview.js":()=>n(()=>import("./kimi-k2-0905-preview-hEbH4Fv3.js"),[])},`./models/${o}.js`,3)})),r=["kimi-k2-0711-preview","kimi-k2-0905-preview","kimi-k2-turbo-preview","kimi-latest","kimi-thinking-preview","moonshot-v1-128k","moonshot-v1-128k-vision-preview","moonshot-v1-32k","moonshot-v1-32k-vision-preview","moonshot-v1-8k","moonshot-v1-8k-vision-preview","moonshot-v1-auto"].map(e=>({id:e,json:()=>n(()=>import("./kimi-k2-0905-preview-C0-6Eb9c.js"),[]),js:()=>n(()=>import("./kimi-k2-0905-preview-hEbH4Fv3.js"),[]),options:{id:e,name:e,model:e}}));t=t.concat(r);var s=[];function i(e,o,n={}){return e.formatPayload&&"function"==typeof e.formatPayload?e.formatPayload(o,n):{model:e.model,messages:o,stream:n.stream||!1}}function a(){return s[0]}function c(){const e=localStorage.getItem("selected_model");return console.log("savedModelId: ",e,s),e?(o=e,s.find(e=>e.id===o)||a()):a();var o}await async function(){0===(s=(await Promise.all(t.map(async e=>{try{const o=await e.json(),n=o.default||o,t=await e.js();return{...n,formatPayload:t.formatPayload,formatResponse:t.formatResponse,...e.options}}catch(o){return console.error(`Failed to load model ${e.id}:`,o),null}}))).filter(e=>null!==e)).length&&(s=[{id:"deepseek",name:"Deepseek",endpoint:"https://api.deepseek.com/chat/completions",apiKeyEnv:"VITE_DEEPSEEK_API_KEY",defaultKey:"demo_key",model:"deepseek-chat",mockEndpoint:"http://localhost:3001/api/mock-api",formatPayload:(e,o={})=>({model:"deepseek-chat",modelId:"deepseek",messages:[{role:"system",content:"You are a helpful assistant."},{role:"user",content:e}],stream:o.stream||!1}),formatResponse:e=>({context:e.choices?.[0]?.message?.content||""})}])}().catch(e=>{console.error("Failed to initialize models:",e)});var l=null;try{n(()=>import("./mode-config-CuatFriw.js"),[]).then(e=>{l=e.default||e,console.log("导入的模式配置:",l)}).catch(e=>{console.log("未找到模式配置文件，使用默认配置")})}catch(h){console.log("导入模式配置出错:",h)}document.getElementById("app").innerHTML='\n  <div class="container">\n    <h1>AI 对话助手</h1>\n    <div class="model-selector">\n      <label for="model-select">选择模型：</label>\n      <select id="model-select"></select>\n    </div>\n    <div class="mode-switcher">\n      <button id="btn-mock" class="mode-btn active">Mock模式</button>\n      <button id="btn-real" class="mode-btn">真实模式</button>\n    </div>\n    <div id="current-status" class="status-info">当前状态: Mock | Deepseek</div>\n    <div id="reply" class="reply">thinking...</div>\n    <button id="refresh-btn" class="refresh-btn">刷新响应</button>\n  </div>\n';var d=document.createElement("style");function m(){try{const e=localStorage.getItem("app_mode");if("mock"===e||"real"===e){const o="mock"===e;return console.log("LocalStorage模式: "+(o?"mock":"真实")),o}const o=new URLSearchParams(window.location.search).get("mock");if(null!==o){const e="true"===o;return console.log("URL参数模式: "+(e?"mock":"真实")),e}if(l&&l.app_mode){const e="mock"===l.app_mode;return console.log("配置文件模式: "+(e?"mock":"真实")),e}return console.log("默认模式: mock"),!0}catch(h){return console.error("检查mock模式出错:",h),!0}}function p(e){localStorage.setItem("app_mode",e?"mock":"real"),document.getElementById("btn-mock").classList.toggle("active",e),document.getElementById("btn-real").classList.toggle("active",!e),u(e),console.log("模式已切换为: "+(e?"mock":"real"))}function u(e=null){const o=null!==e?e:m(),n=c();document.getElementById("current-status").textContent=`当前状态: ${o?"Mock":"真实"} | ${n.name}`}function f(){const e=document.getElementById("model-select"),o=c();s.forEach(n=>{const t=document.createElement("option");t.value=n.id,t.textContent=n.name,t.selected=n.id===o.id,e.appendChild(t)}),e.addEventListener("change",e=>{const o=e.target.value;var n;n=o,localStorage.setItem("selected_model",n),u(),g()})}async function g(){const e=document.getElementById("reply");e.textContent="thinking...",u();try{const o=await async function(){const e=m(),o=c();console.log(`当前模型: ${o.name}, 模式: ${e?"Mock":"真实"}`);try{let n;const t=`你好 ${o.name}`;if(e){console.log(`使用${o.name}的Mock API`);const e=i(o,t,{isMock:!0});n=await fetch(o.mockEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.model?e:{...e,model:o.id})})}else{console.log(`使用${o.name}的真实API`,o.apiKeyEnv,{BASE_URL:"/fedev-large-model-ai/",DEV:!1,MODE:"production",PROD:!0,SSR:!1});const e={"Content-Type":"application/json",Authorization:`Bearer ${{BASE_URL:"/fedev-large-model-ai/",DEV:!1,MODE:"production",PROD:!0,SSR:!1}[o.apiKeyEnv]||o.defaultKey}`},r=i(o,t,{stream:!1});console.log(`发送到${o.name}的请求格式:`,JSON.stringify(r,null,2)),n=await fetch(o.endpoint,{method:"POST",headers:e,body:JSON.stringify(r.model?r:{...r,model:o.id})})}if(!n.ok)throw new Error(`${e?"模拟":"真实"}API错误: ${n.status}`);const r=await n.json(),s=function(e,o){return e.formatResponse&&"function"==typeof e.formatResponse?e.formatResponse(o):{context:""}}(o,r);return{response:r,data:s}}catch(n){return console.error(`${e?"获取模拟":"获取真实"}${o.name}响应失败:`,n),{response:null,data:{context:`⚫ 这是一条${e?"模拟":"测试"}响应数据（${o.name}）${e?"，用于验证Mock模式功能。":"，用于验证保存功能。"}`}}}}();e.textContent=o.data.context,m()||o.data.context.startsWith("⚫")||await async function(e){if(m())return void console.log("Mock模式下，不保存响应到文件");const o=c(),n=o.formatPayload(`你好 ${o.name}`),t={timestamp:(new Date).toISOString(),model:o.id,modelName:o.name,response:e,request:n};try{const e=await(await fetch("http://localhost:3001/api/save-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();e.success?console.log(e.message):console.error("保存失败:",e.message)}catch(r){console.error("保存文件时发生错误:",r)}}(o.response)}catch(o){console.error("获取响应失败:",o),e.textContent=`获取响应失败: ${o.message}`}}d.textContent="\n  body {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    min-height: 100vh;\n    margin: 0;\n    background-color: #f0f7ff;\n  }\n  .container {\n    text-align: center;\n    padding: 2rem;\n    background-color: white;\n    border-radius: 12px;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  }\n  h1 {\n    color: #3498db;\n    margin-bottom: 1.5rem;\n  }\n  .reply {\n    padding: 1rem;\n    background-color: #f8f9fa;\n    border-radius: 8px;\n    border-left: 4px solid #3498db;\n    min-height: 60px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 1.1rem;\n    margin-bottom: 1rem;\n  }\n  .model-selector {\n    margin-bottom: 1rem;\n  }\n  .model-selector select {\n    padding: 0.5rem;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    font-size: 1rem;\n  }\n  .status-info {\n    margin-bottom: 1rem;\n    font-size: 0.9rem;\n    color: #666;\n  }\n  .mode-switcher {\n    display: flex;\n    justify-content: center;\n    gap: 0.5rem;\n    margin-bottom: 1rem;\n  }\n  .mode-btn {\n    padding: 0.5rem 1rem;\n    border: 1px solid #ddd;\n    background-color: #f8f9fa;\n    border-radius: 4px;\n    cursor: pointer;\n  }\n  .mode-btn.active {\n    background-color: #3498db;\n    color: white;\n    border-color: #3498db;\n  }\n  .refresh-btn {\n    padding: 0.5rem 1.5rem;\n    background-color: #2ecc71;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 1rem;\n  }\n  .refresh-btn:hover {\n    background-color: #27ae60;\n  }\n",document.head.appendChild(d),function(){const e=document.getElementById("btn-mock"),o=document.getElementById("btn-real"),n=document.getElementById("refresh-btn");f(),p(m()),e.addEventListener("click",()=>{p(!0),g()}),o.addEventListener("click",()=>{p(!1),g()}),n.addEventListener("click",()=>{g()})}(),g();
//# sourceMappingURL=index-NLG4FFR6.js.map